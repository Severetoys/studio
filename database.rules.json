
{
  "rules": {
    // Regra padrão: Nega leitura e escrita para todos por padrão.
    // O acesso via Admin SDK (usado no painel de administração) ignora estas regras.
    ".read": false,
    ".write": false,

    "facialAuth": {
       "users": {
          // Permite leitura pública dos dados dos usuários, necessário para o processo de verificação da IA.
          ".read": true,
           // A escrita aqui também será feita pelo servidor, que já tem acesso de admin.
          ".write": false
       }
    },
    "admin": {
      // Apenas o servidor (Admin SDK) pode ler/escrever as configurações.
      ".read": false,
      ".write": false
    },
    "payments": {
       // Apenas o servidor (Admin SDK) pode ler/escrever os pagamentos.
      ".read": false,
      ".write": false
    },
    "reviews": {
      // Qualquer um pode ler as avaliações.
      ".read": true,
      // Apenas o servidor (Admin SDK) pode escrever/moderar as avaliações.
      ".write": false
    },
    "products": {
      // Qualquer um pode ler os produtos.
      ".read": true,
      // Apenas o servidor (Admin SDK) pode escrever os produtos.
      ".write": false
    },
    "photos": {
      // Qualquer um pode ler as fotos.
      ".read": true,
      // Apenas o servidor (Admin SDK) pode escrever as fotos.
      ".write": false
    },
    "videos": {
      // Qualquer um pode ler os vídeos.
      ".read": true,
      // Apenas o servidor (Admin SDK) pode escrever os vídeos.
      ".write": false
    },
    "chats": {
      // Permite que usuários anônimos autenticados leiam e escrevam em seus próprios chats
      "$chatId": {
        ".read": "auth != null",
        ".write": "auth != null",
        "messages": {
          ".indexOn": ["timestamp"]
        }
      }
    }
  }
}
