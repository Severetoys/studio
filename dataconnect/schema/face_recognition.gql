
"""
Defines the schema for storing user information for facial recognition.
"""
graphql
type User @table(name: "users") {
  id: ID! @column(name: "id", primaryKey: true, default: "gen_random_uuid()")
  name: String! @column(name: "name")
  email: String! @column(name: "email", unique: true)
  faceEmbedding: [Float!] @column(name: "face_embedding")
  createdAt: Timestamp! @column(name: "created_at", default: "now()")
  updatedAt: Timestamp! @column(name: "updated_at", default: "now()", onUpdate: "now()")
}

extend type Query {
  "Retrieves a single user by their ID."
  user(id: ID!): User @permission(level: "public")
  "Retrieves a list of all users."
  users: [User!] @permission(level: "public")
}

extend type Mutation {
  "Creates a new user."
  createUser(
    name: String!,
    email: String!,
    faceEmbedding: [Float!]
  ): User @permission(level: "public")

  "Updates the face embedding for an existing user."
  updateUserFaceEmbedding(
    id: ID!,
    faceEmbedding: [Float!]!
  ): User @permission(level: "public")
}
